---
import { Programs } from "@repo/program-data";
import TableLayout from "../../components/layouts/table-layout.astro";
import { ProgramsDataTable } from "../../data/programs";

const p = Programs.instance;

export function getStaticPaths() {
  const programs = Programs.instance;

  const areas = programs.getCurriculumFocusAreaDisplay();
  return areas.map((a) => {
    return {
      params: { area: a.slug },
    };
  });
}

const { area: areaSlug } = Astro.params;

const area = p.getCurriculumFocusAreaDisplay().find((a) => a.slug === areaSlug);

const programs = p.filterByCurriculumFocusArea(areaSlug);
---

<TableLayout title={area?.label || ""}>
  <ProgramsDataTable client:load programs={programs.programs} />
</TableLayout>
